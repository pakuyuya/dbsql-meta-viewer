FROM golang:1.11.5-alpine3.9
MAINTAINER pakuyuya

ARG REPOSITORY=https://github.com/pakuyuya/dbsql-meta-viewer.git
ARG GODOMAIN=github.com/pakuyuya
ENV DIST=/var/dist \
    GOPATH=/go

RUN apk update \
    && apk add git dep \
    && mkdir -p "$GOPATH/$GODOMAIN"

RUN git clone $REPOSITORY "$GOPATH/github.com/pakuyuya/dbsql-meta-viewer" \
    && cd "$GOPATH/github.com/pakuyuya/dbsql-meta-viewer/server" \
    && /bin/ash $GOPATH/github.com/pakuyuya/dbsql-meta-viewer/server/build.sh \
    && cp -rf ./dist /var/dist

